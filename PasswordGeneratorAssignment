import java.util.Random;
import java.util.Scanner;

public class PasswordGenerator {

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        try {
            // Ask the user for the desired password length
            System.out.print("Enter the desired password length: ");
            int passwordLength = scanner.nextInt();
            scanner.nextLine(); // Clear the newline character from input buffer

            // Ask the user to specify the character options for the password
            System.out.println("Choose the character options for your password:");
            System.out.println("1. Lowercase letters");
            System.out.println("2. Uppercase letters");
            System.out.println("3. Digits");
            System.out.println("4. Special characters");
            System.out.print("Enter your choices as a comma-separated list (e.g., 1,3,4): ");

            String userChoices = scanner.nextLine();

            // Generate the password
            String generatedPassword = generatePassword(passwordLength, userChoices);

            // Print the generated password
            System.out.println("Hereâ€™s your password: " + generatedPassword);
        } catch (Exception e) {
            System.out.println("Error: " + e.getMessage());
        } finally {
            scanner.close(); // Always close the scanner to release resources
        }
    }

    private static String generatePassword(int length, String options) {
        // Define character pools for password generation
        String lowercase = "abcdefghijklmnopqrstuvwxyz";
        String uppercase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        String numbers = "0123456789";
        String specialChars = "!@#$%^&*()_-+=<>?";

        // Build the pool of characters based on user input
        StringBuilder characterPool = new StringBuilder();
        String[] choices = options.split(",");

        for (String choice : choices) {
            switch (choice.trim()) {
                case "1":
                    characterPool.append(lowercase);
                    break;
                case "2":
                    characterPool.append(uppercase);
                    break;
                case "3":
                    characterPool.append(numbers);
                    break;
                case "4":
                    characterPool.append(specialChars);
                    break;
                default:
                    System.out.println("Invalid option ignored: " + choice);
            }
        }

        if (characterPool.length() == 0) {
            throw new IllegalArgumentException("No valid character options were selected.");
        }

        // Generate the password
        Random random = new Random();
        StringBuilder password = new StringBuilder();

        for (int i = 0; i < length; i++) {
            int randomIndex = random.nextInt(characterPool.length());
            password.append(characterPool.charAt(randomIndex));
        }

        return password.toString();
    }
}
