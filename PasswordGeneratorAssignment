import java.util.Random;
import java.util.Scanner;

public class PasswordGenerator {
    public static void main(String[] args) {
        // Create a Scanner object for user input
        Scanner input = new Scanner(System.in);

        try {
            // Prompt the user to enter the desired password length
            System.out.print("Enter the desired password length: ");
            int length = input.nextInt();
            input.nextLine(); // Consume the newline character

            // Prompt the user to enter the character options for the password
            System.out.println("Enter the character options for the password:");
            System.out.println("1. Lowercase letters");
            System.out.println("2. Uppercase letters");
            System.out.println("3. Digits");
            System.out.println("4. Special characters");
            System.out.println("Enter the numbers of the options, separated by commas (e.g., 1,3,4):");

            String optionsInput = input.nextLine();

            // Generate password based on user input for the length and character options
            String password = generatePassword(length, optionsInput);

            // Display the generated password
            System.out.println("Generated Password: " + password);
        } catch (Exception e) {
            System.out.println("An error occurred: " + e.getMessage());
        } finally {
            input.close(); // Ensure the Scanner is closed
        }
    }

    /**
     * Generates a password based on the given length and character options.
     *
     * @param length       The desired length of the password
     * @param optionsInput The user-provided character options for the password
     * @return The generated password
     */
    public static String generatePassword(int length, String optionsInput) {
        // Define the available character options
        String lowercaseLetters = "abcdefghijklmnopqrstuvwxyz";
        String uppercaseLetters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        String digits = "0123456789";
        String specialCharacters = "!@#$%^&*()_-+=<>?";

        // Split the optionsInput string into an array
        String[] options = optionsInput.split(",");

        // Create a StringBuilder to store characters for password generation
        StringBuilder characters = new StringBuilder();

        // Append the chosen character options to the characters StringBuilder
        for (String option : options) {
            switch (option.trim()) {
                case "1":
                    characters.append(lowercaseLetters);
                    break;
                case "2":
                    characters.append(uppercaseLetters);
                    break;
                case "3":
                    characters.append(digits);
                    break;
                case "4":
                    characters.append(specialCharacters);
                    break;
                default:
                    System.out.println("Invalid option: " + option);
            }
        }

        // Ensure at least one character option was selected
        if (characters.length() == 0) {
            throw new IllegalArgumentException("No valid character options selected.");
        }

        // Create a Random object for generating random indices
        Random random = new Random();

        // Create a StringBuilder to store the generated password
        StringBuilder password = new StringBuilder();

        // Generate the password by randomly choosing characters from the characters StringBuilder
        int charactersLength = characters.length();
        for (int i = 0; i < length; i++) {
            int randomIndex = random.nextInt(charactersLength);
            password.append(characters.charAt(randomIndex));
        }

        // Return the generated password
        return password.toString();
    }
}
